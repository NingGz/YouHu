<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <script src="../../scripts/boot.js" type="text/javascript"></script>
</head>
<body>
<a class="mini-button" onclick="openW">点击打开上传页面</a>
</body>
</html>
<script type="text/javascript">
    mini.parse();
    function openW() {
        mini.open({
            title: "上传面板",
            //url: "src/uploadwindow.html",
            url: bootPATH + "../demo/multiupload/src/uploadwindow.html",
            width: 600,
            height: 350,
            allowResize: false,
            onload: function () {
                var iframe = this.getIFrameEl();
                var data = { a: "msg1", b: "msg2" };  //模拟传递上传参数
                iframe.contentWindow.SetData(data);
            },
            ondestroy: function (action) {
                if (action == "ok") {
                    var iframe = this.getIFrameEl();

                    var data = iframe.contentWindow.GetData();
                    data = mini.clone(data);

                    var json = mini.encode(data);
                    alert("已完成上传数据：\n" + json);
                }
            }
        })
    }
</script>
